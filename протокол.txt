--------------------------------------------------------------------------
все команды от меня начинаются с "n+номер", а все ответы начинаются с номера.
Без пробела: "n25i" и будет потом ответ 2l10.55 s78.25;
--------------------------------------------------------------------------
Все команды для работы с устройством отсылаются строкой (ASCII англ. символы) и в конце каждой команды ставится  ; (точка с запятой)
Устройство на данный момент отвечает то же самое что ему отправили.
Пример команд:
Заправить до полного балона  ; 
 (на данный момент процесс выключается либо кнопкой на устройстве, либо когда мал  расход заправляемого топлива)
Заправить необходимое колличество 10.25;
 (принимает значение до 5 знаков разделитель точка . например 10.123; или 10123; )
Запись цены в устройство    $25.25; (выставится 25 рублей 25 копеек) 
Калибровка точности колонки k9.789; 
 (k маленькая, колличество реально залитого топлива в мерник)

Пояснения по калибровке.
Чтобы мы смогли откалибровать устройство нам потребуется отправить сначала команду для заправки в литрах
10; (заправить 10л к примеру) 
а после заправки и выяснения сколько реально залилось, отправить колличество залитого
k9; (реально получилось 9л - недолив) колонка после этого сама всё пересчитает
и если проделать после то же самое то погрешность будет уже исправлена.

Есть пожелания по интерфейсу касаемо калибровки (юстировки):
 в поле реально залитого для удобства пользования пишем в милилитрах
 1литр = 1000милилитров
пишем в поле 485 м.л., а отправляем k0.485;
--------------------------------------------------------------------
Запрос информации ..i
1i- прочитать цену за литр (можно при запуске программы либо после смены цены)
 P.S. так как без команды она не изменится сама - ответ вида $18.50
2i- температура сжиженного газа(спрашиваем во время простоя так как замер длится минимум 750 милисекунд
например после заправки и каждые последующие 5 минут)- ответ вида t36.6
3i- колличество импульсов турбины на литр (для админа в его настройках)- ответ  I/L400
4i- узнать текущий расход литров в минуту, работает во время заправки пример 4i10; (для админа в его настройках,
отвечает с коллич. заправленных литров)- ответ l1.25 L/M5.5500 отвечает только если были изменения в расходе во время заливки
P.S. в общем запрос чисто для диагностики когда происходят самопроизвольные отключения колонки из за малой проходимости топлива
5i-нет
6i-нет
Остальное так же как было только теперь заправка стартует через подтверждение 'p'
Получается так:
Отправили  10 литров- 10; получили ответ 10; в программе проверяем если истина то отправляем p , если ложь то 
ничего не отправляем и повторяем предыдущий запрос ->(10;)<-(10;) это правда -> (p) после этого и нажатия кнопки старт на плате пойдёт информация о заправке...
вида L0.56 s1.50 каждые 3 секунды
--------------------------------------------------------------------
on video:
1i
2i
3i
...
k0.35;
1;p
;p
--------------------------------------------------------------------
1 Абсолютная точность реально залитого литража при отправке в порт в конце процесса заправки(будет разница с тем что на дисплее,
дисплей вероятней всего покажет меньше!)
2 Появилась возможность запуска колонки из программы отправкой команды  'e' (enter)
3 Изменилась информация об окончании заправки чётким разделением заправлено или остановлено, теперь:
Заправлено это   '!'   (как впрочем и было)
Остановлено это '!!'   (добавлен еще один знак !) так как по большей части прога пишет "Остановлено" как я понимаю получается что она 
изначально просила к примеру 2 литра а получила в итоге 1,99 или 2,01. Условие не подходит и прога пишет остановлено...
Нужно в программе разделить 2 завершения для чёткого понимания процесса.
---------------------------------------------------------------------------------------------------------------------------------------------
"доработка по информации.txt"
Начну с того что сейчас контроллер зашит вторым номером так что будем проверять на нём и 
примеры буду приводить тоже для второго номера.Запросы и ответы пишу в " "

1. Ранее информащия по заправке от колонки сыпалась сама раз в секунду и программа её принимала,
это ответ: "2L1.55 s20.23"(l пишу большую иначе как единица выглядит, в ответе малая)

теперь чтобы ответ пришол его нужно сначала запросить 
командой: "n25i" где n2-номер колонки и 5i-это собственно сам запрос о текущей информации 
которую видит оперетор колонки.

Этот запрос выполняется один раз, то есть 1 вопрос - 1ответ. А нам нужно информацию видеть
в мониторе так что запрос должен приходить например раз в 500 милисекунд. 

Как мы уже обговаривали нужно будет это для того чтоб все ответы с колонок были по очереди
иначе если допустим у нас одновременно 10 рукавов посылают одновременно информацию у нас будет
на линии не сигнал а постоянное электричество))))))))

пример опроса 3х штук:

        отправить "n15i" delay500(ms) "n25i" delay500(ms) "n35i" и тд.........
        получить  "1L1.55 s20.23"     "2L1.55 s20.23"     "3L1.55 s20.23"
 
 ответ об окончании процесса прилетает сам автоматом это который ! и !! на конце как и было
 пока оставляем.

с задержкой это просто пример будем с ней наверное играть смотреть а в идеале в настройках
поле сделать типо так - обновление инфо. [поле ввода] милисекунд

2. Нельзя теперь в настройках ни цену поставить ни чего либо посмотреть так как запрос 
теперь должен идти через n2+команда. нужно в настройках сделать поле в самом верху

например - колонка № [выпадающий список] и в списке от 0 до 9
НО если меняем цену за литр она должна прописаться во ВСЕ добавленные колонки!!!


скопирую сюда ещё раз пояснения команд по информации:

Запрос информации ..i
1i- прочитать цену за литр (можно при запуске программы либо после смены цены)
P.S. так как без команды она не изменится сама - ответ вида "2$18.50"

2i- температура сжиженного газа(спрашиваем во время простоя так как замер длится минимум 750 милисекунд
например после заправки и каждые последующие 5 минут)- ответ вида "2t36.6"

3i- колличество импульсов турбины на литр (для админа в его настройках)- ответ  "2I/L400"

4i- узнать текущий расход литров в минуту, работает во время заправки пример "n24i10;" (для админа в его настройках,
отвечает с коллич. заправленных литров)- ответ "2l1.25 L/M5.5500" отвечает только если были изменения в расходе во время заливки
P.S. в общем запрос чисто для диагностики когда происходят самопроизвольные отключения колонки
из за малой проходимости топлива. ПРИ ЭТОЙ УСТАНОВКЕ ИНФОРМАЦИЯ ПРИХОДИТ САМА, ЗАПРАШИВАТЬ
ЕЁ НЕ НУЖНО!! Выводится по старому заместо суммы.

5i - получить информацию о процессе заправки ответ вида: "2L1.55 s20.23"
6i-нет
---------------------------------------------------------------------------------------------------------------------------------------------
